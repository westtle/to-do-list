let toDoItem=[];const listItemContainer=document.querySelector(".__list-items"),addInput=document.querySelector("._add-input"),addButton=document.querySelector("._add-button");function addItem(){if(""==addInput.value)return!1;let e={activities:addInput.value,completed:!1,id:+new Date};toDoItem.push(e);let t=itemTemplateCreate(e);listItemContainer.innerHTML+=t,addInput.value="",addEventListenerToBtn(),checkIfEmpty(),saveItem()}function removeItem(){let e=this.parentNode.parentNode;toDoItem.forEach((t,i)=>{t.id==e.id&&toDoItem.splice(i,1)}),e.remove(),checkIfEmpty(),saveItem()}function editItem(){let e=this.parentNode.parentNode,t=e.childNodes[1];toDoItem.forEach((i,s)=>{if(i.id==e.id){if(0==t.children.length){let a=t.innerText,d=`<input type="text" value="${a}">`;t.innerHTML=d;let o=2*t.childNodes[0].value.length;t.childNodes[0].focus(),t.childNodes[0].setSelectionRange(o,o),t.childNodes[0].addEventListener("keypress",e=>{"Enter"==e.key&&this.click()})}else{let n=t.childNodes[0].value;if(""==n)return!1;t.childNodes[0].remove(),t.innerText=n,toDoItem[s].activities=n}}}),saveItem()}function changeStatus(){let e=this.parentNode.parentNode;toDoItem.forEach((t,i)=>{t.id==e.id&&(!1==t.completed?(t.completed=!0,e.querySelector(".activities_").dataset.completed="true",e.querySelector(".status__").src="assets/Images/check-square.svg"):(t.completed=!1,e.querySelector(".activities_").dataset.completed="false",e.querySelector(".status__").src="assets/Images/square.svg"))}),saveItem()}function checkIfEmpty(){if(0==listItemContainer.childNodes.length){let e=document.createElement("span");e.innerText="Empty.",e.classList.add("_empty"),listItemContainer.appendChild(e)}else{let t=document.querySelector("._empty");null!==t&&t.remove()}}function renderItems(e){e.forEach((e,t)=>{let i=itemTemplateCreate(e);if(listItemContainer.innerHTML+=i,addEventListenerToBtn(),!0==e.completed){let s=document.querySelectorAll(".status__")[t];s.src="assets/Images/check-square.svg",s.parentNode.parentNode.querySelector(".activities_").dataset.completed="true"}})}function itemTemplateCreate(e){return`<div class="_item" id="${e.id}">
				<div class="activities_">${e.activities}</div>
				<div class="tools_">
					<img class="edit__" src="assets/Images/edit.svg" width="21" height="21" alt="Edit item">
					<img class="status__" src="assets/Images/square.svg" width="21" height="21" alt="Status item">
					<img class="remove__" src="assets/Images/x.svg" width="21" height="21" alt="Remove item">
				</div>
			</div>`}function addEventListenerToBtn(){document.querySelectorAll(".remove__").forEach(e=>e.addEventListener("click",removeItem));document.querySelectorAll(".status__").forEach(e=>e.addEventListener("click",changeStatus));document.querySelectorAll(".edit__").forEach(e=>e.addEventListener("click",editItem))}const to_do_item="To_Do_Item";function saveItem(){localStorage.setItem(to_do_item,JSON.stringify(toDoItem))}function loadItem(){let e=JSON.parse(localStorage.getItem(to_do_item))||[];renderItems(toDoItem=e)}addButton.addEventListener("click",addItem),addInput.addEventListener("keypress",e=>{"Enter"===e.key&&addButton.click()}),document.addEventListener("DOMContentLoaded",()=>{loadItem(),checkIfEmpty()});